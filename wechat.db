CREATE TABLE `wx_group` (
  `id` int(11) NOT NULL COMMENT '主键',
  `name` varchar(45) DEFAULT NULL COMMENT '组名称',
  `count` int(11) DEFAULT NULL COMMENT '组内人数',
  `nickname` varchar(255) DEFAULT NULL,
  `is_quartz` int(11) DEFAULT '0' COMMENT '是否跑完定时，跑完了就设为1，没跑完就默认是0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `wx_group_quartz` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '主键，唯一标示',
  `group_id` int(11) DEFAULT NULL COMMENT '组id，定时条件对应的组，关联wx_group表id',
  `country` varchar(255) DEFAULT NULL COMMENT '城市',
  `province` varchar(255) DEFAULT NULL COMMENT '省份',
  `city` varchar(255) DEFAULT NULL COMMENT '城市',
  `sex` int(4) DEFAULT NULL COMMENT '性别',
  `subscribe_start` bigint(20) DEFAULT NULL COMMENT '关注时间起始',
  `subscribe_end` bigint(20) DEFAULT NULL COMMENT '关注时间截止',
  `is_quartz` int(11) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;

CREATE TABLE `wx_area` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '主键自增',
  `country` varchar(255) DEFAULT NULL COMMENT '国家',
  `province` varchar(255) DEFAULT NULL COMMENT '省份',
  `city` varchar(255) DEFAULT NULL COMMENT '城市',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;

CREATE TABLE `wx_user` (
  `openid` varchar(255) NOT NULL DEFAULT 'error' COMMENT '用户的标识，对当前公众号唯一',
  `subscribe` int(11) DEFAULT NULL COMMENT '用户是否订阅该公众号标识，值为0时，代表此用户没有关注该公众号，拉取不到其余信息。',
  `nickname` varchar(255) DEFAULT NULL COMMENT '用户的昵称',
  `sex` int(11) DEFAULT NULL COMMENT '用户的性别，值为1时是男性，值为2时是女性，值为0时是未知',
  `language` varchar(255) DEFAULT NULL COMMENT '用户的语言，简体中文为zh_CN',
  `city` varchar(255) DEFAULT NULL COMMENT '用户所在的城市',
  `province` varchar(255) DEFAULT NULL COMMENT '用户所在的省份',
  `country` varchar(255) DEFAULT NULL COMMENT '用户所在的国家',
  `headimgurl` varchar(512) DEFAULT NULL COMMENT '用户头像，最后一个数值代表正方形头像大小（有0、46、64、96、132数值可选，0代表640*640正方形头像），用户没有头像时该项为空。若用户更换头像，原有头像URL将失效。',
  `subscribe_time` int(11) DEFAULT NULL COMMENT '用户关注时间，为时间戳。如果用户曾多次关注，则取最后关注时间',
  `unionid` varchar(255) DEFAULT NULL COMMENT '只有在用户将公众号绑定到微信开放平台帐号后，才会出现该字段。',
  `remark` varchar(255) DEFAULT NULL COMMENT '公众号运营者对粉丝的备注，公众号运营者可在微信公众平台用户管理界面对粉丝添加备注',
  `groupid` int(11) DEFAULT NULL COMMENT '用户所在的分组ID',
  `flag` int(11) NOT NULL DEFAULT '0' COMMENT '标识位，默认0：正常数据；1表示微信取来的数据为空；2表示微信取来的数据有特殊字符，需重新解析后更新；',
  PRIMARY KEY (`openid`),
  KEY `in_nickname` (`nickname`),
  KEY `in_country` (`country`),
  KEY `in_province` (`province`),
  KEY `in_city` (`city`),
  KEY `in_sub_time` (`subscribe_time`),
  KEY `in_unionid` (`unionid`),
  KEY `in_groupid` (`groupid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `wx_mass_msg` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '主键，唯一标示',
  `thumb_media_id` varchar(255) DEFAULT NULL COMMENT '首页缩略图media_id，通过上传图片给微信服务器获取，后续用作上传图文消息的column',
  `author` varchar(45) DEFAULT NULL COMMENT '作者，显示在正文页，可为空，不能超过8个字',
  `title` varchar(100) DEFAULT NULL COMMENT '标题，必填项，不能超过64字',
  `content` blob COMMENT '正文内容',
  `content_source_url` varchar(255) DEFAULT NULL COMMENT '正文‘阅读全文’链接的url，选填',
  `digest` varchar(255) DEFAULT NULL COMMENT '描述，选填，只有当文本消息只有一条cover内容时展示',
  `show_cover_pic` int(2) DEFAULT NULL COMMENT '是否将封面展示在正文中，1为展示，0为不展示',
  `cover_pic_local_url` varchar(255) DEFAULT NULL,
  `add_time` datetime DEFAULT NULL COMMENT '此条记录的创建时间，只要插入了id就算创建',
  `last_update_time` datetime DEFAULT NULL COMMENT '最后一次修改时间，任何一个字段的修改都需更新这个字段',
  `is_posted` int(2) DEFAULT NULL COMMENT '是否群发发布，0代表还未群发，1代表已经群发',
  `is_previewed` int(2) DEFAULT NULL COMMENT '是否预览过，1代表已经预览，0代表未预览',
  `media_id` varchar(255) DEFAULT NULL COMMENT '调用微信接口获取',
  `media_created_time` datetime DEFAULT NULL COMMENT 'media创建时间，每个图文消息都对应一个mediaId，这个id通过调用微信接口获取。',
  `posted_time` datetime DEFAULT NULL COMMENT '消息实际群发的时间，如果消息只是保存而没有发布，此字段为空',
  `msg_posted_id` bigint(15) DEFAULT NULL COMMENT '图文消息发布id，对应的是调用微信接口返回内容的msg_id字段（msg_id容易混淆，所以字段名取为msg_posted_id，代表是已经发布的消息，并且这个消息有一个唯一标示id）',
  `msg_data_id` bigint(15) DEFAULT NULL COMMENT '消息的数据ID，该字段只有在群发图文消息时，才会出现。可以用于在图文分析数据接口中，获取到对应的图文消息的数据，是图文分析数据接口中的msgid字段中的前半部分，详见图文分析数据接口中的msgid字段的介绍。',
  `is_to_all` int(2) DEFAULT NULL,
  `previewed_to` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `in_add_time` (`add_time`),
  KEY `in_thumb_media_id` (`thumb_media_id`),
  KEY `in_last_update_time` (`last_update_time`),
  KEY `in_media_id` (`media_id`),
  KEY `in_media_create_time` (`media_created_time`),
  KEY `in_posted_time` (`posted_time`),
  KEY `in_msg_posted_id` (`msg_posted_id`),
  KEY `in_msg_data_id` (`msg_data_id`)
) ENGINE=InnoDB AUTO_INCREMENT=125 DEFAULT CHARSET=utf8;

CREATE TABLE `wx_mass_msg_item` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '主键，唯一标示',
  `mass_msg_id` int(11) DEFAULT NULL COMMENT '关联wx_mass_msg表的id',
  `thumb_media_id` varchar(255) DEFAULT NULL COMMENT '缩略图media_id',
  `author` varchar(45) DEFAULT NULL COMMENT '作者，选填',
  `title` varchar(100) DEFAULT NULL COMMENT '标题',
  `content` blob COMMENT '内容',
  `content_source_url` varchar(255) DEFAULT NULL COMMENT '阅读全文对应的链接',
  `show_cover_pic` int(11) DEFAULT NULL COMMENT '是否展示首页图片，1为展示，0为不展示',
  `cover_pic_local_url` varchar(255) DEFAULT NULL,
  `add_time` datetime DEFAULT NULL COMMENT '此条item添加的时间',
  `last_update_time` datetime DEFAULT NULL COMMENT '最后一次修改此条item的时间',
  PRIMARY KEY (`id`),
  KEY `in_mass_msg_id` (`mass_msg_id`),
  KEY `in_thumb_media_id` (`thumb_media_id`),
  KEY `in_add_time` (`add_time`),
  KEY `in_last_update_time` (`last_update_time`)
) ENGINE=InnoDB AUTO_INCREMENT=113 DEFAULT CHARSET=utf8;
